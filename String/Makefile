TARGET_0=main
TARGET_1=read
TARGET_2=write

CC=gcc
CCFLAGS=-Werror -Wall -Wextra
EXTFLAGS=-z execstack -z norelro -fno-stack-protector

all: $(TARGET_0) $(TARGET_1) $(TARGET_2)

main.o: main.c 
	$(CC) $(CCFLAGS) $(EXTFLAGS) -c $<

read.o: read.c 
	$(CC) $(CCFLAGS) $(EXTFLAGS) -c $<

write.o: write.c 
	$(CC) $(CCFLAGS) $(EXTFLAGS) -c $<

$(TARGET_0): main.o 
	$(CC) $(CCFLAGS) $(EXTFLAGS) -o $@ $^

$(TARGET_1): main.o 
	$(CC) $(CCFLAGS) $(EXTFLAGS) -o $@ $^

$(TARGET_2): main.o 
	$(CC) $(CCFLAGS) $(EXTFLAGS) -o $@ $^


.PHONY: clean compile
clean: 
	rm $(TARGET_0) $(TARGET_1) $(TARGET_2) *.o


